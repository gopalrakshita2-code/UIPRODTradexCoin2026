<app-floating-configurator />
<div class="bg-surface-50 dark:bg-surface-950 flex items-center justify-center min-h-screen w-full overflow-hidden px-4 py-4">
    <div class="flex flex-col items-center justify-center w-full max-w-md">
        <div style="border-radius: 56px; padding: 0.3rem; background: linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)">
            <div class="w-full bg-surface-0 dark:bg-surface-900 py-8 sm:py-12 md:py-20 px-4 sm:px-8 md:px-20" style="border-radius: 53px">
                <div class="text-center mb-6 sm:mb-8">
                    <img src="assets/demo/images/logo/TradexCoinLogo.png" alt="Logo" class="mb-4 sm:mb-8 w-16 h-16 sm:w-20 sm:h-20 object-contain shrink-0 mx-auto">
                    <div class="text-surface-900 dark:text-surface-0 text-2xl sm:text-3xl font-medium mb-2 sm:mb-4">Create Account</div>
                    <span class="text-muted-color font-medium text-sm sm:text-base"> Join TradexCoin and start trading smarter with confidence.</span>
                </div>

                <p-fluid>
                    <div class="flex flex-col gap-4">
                        <div class="mb-4">
                            <p-floatlabel>
                                <input pInputText id="userName" type="text" [(ngModel)]="userName" (blur)="onUserNameBlur()" (ngModelChange)="userNameTouched && validateUserName()" autocomplete="off" required [class.ng-invalid]="userNameTouched && userNameError" />
                                <label for="userName">Username <span class="text-red-500">*</span></label>
                            </p-floatlabel>
                            <small class="text-red-500 text-sm mt-1 block" *ngIf="userNameTouched && userNameError">{{ userNameError }}</small>
                        </div>

                        <div class="mb-4">
                            <p-floatlabel>
                                <input pInputText id="email" type="email" [(ngModel)]="email" (blur)="onEmailBlur()" (ngModelChange)="emailTouched && validateEmail()" autocomplete="off" required pattern="^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?){1,2}$" [class.ng-invalid]="emailTouched && emailError" />
                                <label for="email">Email <span class="text-red-500">*</span></label>
                            </p-floatlabel>
                            <small class="text-red-500 text-sm mt-1 block" *ngIf="emailTouched && emailError">{{ emailError }}</small>
                        </div>
                        
                        <div class="mb-4">
                            <p-floatlabel>
                                <p-password id="password" [(ngModel)]="password" (ngModelChange)="onPasswordChange()" [toggleMask]="true" [feedback]="false" [fluid]="true" autocomplete="off" required [class.ng-invalid]="passwordTouched && passwordError"></p-password>
                                <label for="password">Password <span class="text-red-500">*</span></label>
                            </p-floatlabel>
                            <small class="text-red-500 text-sm mt-1 block" *ngIf="passwordTouched && passwordError">{{ passwordError }}</small>
                        </div>

                        <div class="mb-4">
                            <p-floatlabel>
                                <p-password id="confirmPassword" [(ngModel)]="confirmPassword" (ngModelChange)="onConfirmPasswordChange()" [toggleMask]="true" [feedback]="false" [fluid]="true" autocomplete="off" required [class.ng-invalid]="confirmPasswordTouched && confirmPasswordError"></p-password>
                                <label for="confirmPassword">Confirm Password <span class="text-red-500">*</span></label>
                            </p-floatlabel>
                            <small class="text-red-500 text-sm mt-1 block" *ngIf="confirmPasswordTouched && confirmPasswordError">{{ confirmPasswordError }}</small>
                        </div>

                        <!-- Buttons Grid - Uniform Size -->
                        <div class="grid grid-cols-3 gap-3 mt-4">
                            <p-button 
                                label="Register" 
                                (onClick)="onRegister()" 
                                [loading]="isLoading" 
                                styleClass="w-full h-12"
                                severity="primary">
                            </p-button>
                            <p-button 
                                label="Login" 
                                routerLink="/auth/login" 
                                [outlined]="true" 
                                styleClass="w-full h-12"
                                severity="secondary">
                            </p-button>
                            <p-button 
                                label="Back" 
                                routerLink="/" 
                                [outlined]="true" 
                                styleClass="w-full h-12"
                                severity="success">
                            </p-button>
                        </div>
                    </div>
                </p-fluid>
            </div>
        </div>
    </div>
</div>

<p-dialog 
    [(visible)]="successDialog" 
    [style]="{ width: '90vw', maxWidth: '450px' }" 
    [breakpoints]="{ '960px': '90vw', '640px': '95vw' }"
    header="Registration Successful" 
    [modal]="true" 
    [closable]="false"
    [draggable]="false"
    [resizable]="false">
    <div class="flex flex-col gap-3 sm:gap-4 text-center px-2 sm:px-4">
        <i class="pi pi-check-circle text-5xl sm:text-6xl md:text-7xl text-green-500 mx-auto"></i>
        <p class="text-sm sm:text-base md:text-lg font-medium text-surface-700 dark:text-surface-300 px-2">
            Your account has been created successfully!
        </p>
    </div>
    <ng-template pTemplate="footer">
        <div class="w-full px-2 sm:px-0">
            <p-button 
                label="Go to Login" 
                (onClick)="goToLogin()" 
                styleClass="w-full text-sm sm:text-base"
                [style]="{ height: '44px' }">
            </p-button>
        </div>
    </ng-template>
</p-dialog>

<p-dialog 
    [(visible)]="errorDialog" 
    [style]="{ width: '90vw', maxWidth: '450px' }" 
    [breakpoints]="{ '960px': '90vw', '640px': '95vw' }"
    header="Registration Failed" 
    [modal]="true" 
    [closable]="true"
    [draggable]="false"
    [resizable]="false">
    <div class="flex flex-col gap-3 sm:gap-4 text-center px-2 sm:px-4">
        <i class="pi pi-times-circle text-5xl sm:text-6xl md:text-7xl text-red-500 mx-auto"></i>
        <p class="text-sm sm:text-base md:text-lg font-medium text-surface-700 dark:text-surface-300 px-2">
            {{ errorMessage }}
        </p>
    </div>
    <ng-template pTemplate="footer">
        <div class="w-full px-2 sm:px-0">
            <p-button 
                label="Try Again" 
                (onClick)="closeErrorDialog()" 
                styleClass="w-full text-sm sm:text-base"
                severity="danger"
                [style]="{ height: '44px' }">
            </p-button>
        </div>
    </ng-template>
</p-dialog>